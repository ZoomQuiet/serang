BaseStructure
# Client结点，在AG中动态组合的MN上实现负载均衡 #
## 目标或职责 ##

  1. AR维护了应用-机器的关联信息
  1. 这些信息被实时同步到客户端，每个客户端都有相同的信息，当应用访问到时，通过配置在Client上的负载均衡策略，分发请求，AG内负载均衡策略
    * 启动时随机选取机器
    * 遇到繁忙或服务停止时跳过该机器,并随机选取
    * 以轮寻的方式选择下一台
    * 由于多个应用会共享同一台机器，访问统计的时候要跨应用进行，其实更简单，只要统计被访问的那个机器
  1. 问题
    * Client和MN的比例，是否需要数据直接返回给用户，而不通过Clients中转
    * Clients上的信息通常更新不会非常频繁吗？如果频繁的增加减少应用或应用中的机器，该怎么办？
    * Clients如何被通知，高效可靠
    * 每个Client如何转发请求？怎样更节省，毕竟AG的数量是多的，用来提供服务，总不能Clients也膨胀吧


## 负载均衡 ##

clients上维护一份这样的对应关系，来自于AppRegNode

|**AppGroup**|**MachineNode**||**|
|:-----------|:--------------|**|album|	"10.0.10.1" |
|      | 	"10.0.10.8" |
|forum|	"10.0.10.1" |
|      |	"10.0.10.9" |

根据请求的应用，在应用所在的Nodes上分发请求

用Nginx可以实现